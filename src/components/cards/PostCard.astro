---
import { css } from '../styled-system/css';
import { postCardSlot, badge } from '../styled-system/recipes';

export interface Props {
  title: string;
  description: string;
  pubDate: Date;
  slug: string;
  image?: string;
  tags?: string[];
  variant?: 'default' | 'featured';
  size?: 'sm' | 'md' | 'lg';
}

const { 
  title, 
  description, 
  pubDate, 
  slug, 
  image = '/default-post-image.jpg', 
  tags, 
  variant = 'default',
  size = 'md'
} = Astro.props;

const postCardClasses = postCardSlot({ variant, size });
---

<article class={postCardClasses.root}>
  <div class={postCardClasses.image}>
    <img 
      src={image} 
      alt={title} 
      class={css({
        width: '100%',
        height: '100%',
        objectFit: 'cover'
      })} 
    />
  </div>
  <div class={postCardClasses.content}>
    <div class={postCardClasses.meta}>
      <time datetime={pubDate.toISOString()}>
        {pubDate.toLocaleDateString('ja-JP')}
      </time>
      {tags && tags.length > 0 && (
        <span class={badge({ variant: 'mint', size: 'sm' })}>{tags[0]}</span>
      )}
    </div>
    <h4 class={postCardClasses.title}>
      <a href={`/blog/${slug}`}>{title}</a>
    </h4>
    <p class={postCardClasses.description}>{description}</p>
    <a href={`/blog/${slug}`} class={postCardClasses.readMore}>続きを読む</a>
  </div>
</article>
