---
import { css } from '../../styled-system/css';
import { card, badge, btn } from '../../styled-system/recipes';

export interface Props {
  title: string;
  description: string;
  pubDate: Date;
  slug: string;
  image?: string;
  tags?: string[];
  variant?: 'default' | 'elevated';
  size?: 'sm' | 'md' | 'lg';
}

const { 
  title, 
  description, 
  pubDate, 
  slug, 
  image = '/default-post-image.jpg', 
  tags, 
  variant = 'default',
  size = 'md'
} = Astro.props;

const cardClass = card({ variant, size });

const imageStyle = css({
  width: '100%',
  height: '200px',
  objectFit: 'cover',
  borderRadius: '8px 8px 0 0',
});

const contentStyle = css({
  padding: '20px',
});

const metaStyle = css({
  display: 'flex',
  justifyContent: 'space-between',
  alignItems: 'center',
  marginBottom: '12px',
  fontSize: '14px',
  color: 'semantic.text.secondary',
});

const titleStyle = css({
  fontSize: '20px',
  fontWeight: '600',
  marginBottom: '8px',
  lineHeight: '1.3',
});

const titleLinkStyle = css({
  textDecoration: 'none',
  color: 'semantic.text.primary',
  _hover: {
    color: 'semantic.primary.DEFAULT',
  },
});

const descriptionStyle = css({
  fontSize: '14px',
  color: 'semantic.text.secondary',
  lineHeight: '1.5',
  marginBottom: '16px',
});
---

<article class={cardClass}>
  <img 
    src={image} 
    alt={title} 
    class={imageStyle}
  />
  <div class={contentStyle}>
    <div class={metaStyle}>
      <time datetime={pubDate.toISOString()}>
        {pubDate.toLocaleDateString('ja-JP', { 
          year: 'numeric', 
          month: 'short', 
          day: 'numeric' 
        })}
      </time>
      {tags && tags.length > 0 && (
        <span class={badge({ variant: 'secondary', size: 'sm' })}>{tags[0]}</span>
      )}
    </div>
    <h3 class={titleStyle}>
      <a href={`/blog/${slug}`} class={titleLinkStyle}>{title}</a>
    </h3>
    <p class={descriptionStyle}>{description}</p>
    <a href={`/blog/${slug}`} class={btn({ variant: 'outline', size: 'sm' })}>
      続きを読む →
    </a>
  </div>
</article>
